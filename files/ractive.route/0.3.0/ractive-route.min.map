{"version":3,"file":"ractive-route.min.js","sources":["ractive-route.js"],"names":["factory","module","exports","require","define","amd","window","Ractive","Route","pattern","Handler","observe","router","this","map","parsePattern","regExp","patternToRegExp","strictRegExp","patternToStrictRegExp","isComponent","extend","assign","qs","hash","state","allObserved","concat","view","match","name","substr","RegExp","patternToRegExpString","replace","Router","options","globals","basePath","el","data","history","strictMode","linksWatcher","stateWatcher","route","routes","uri","shouldDispatch","oldUri","newUri","path","decodeURIComponent","length","object","source","i","c","arguments","x","hasOwnProperty","undefined","compact","collection","pick","value","isEmpty","Object","keys","joinPaths","parts","Array","prototype","slice","call","join","parents","nodeName","toLowerCase","parentNode","parseHash","parsed","JSON","parse","e","parseJSON","string","parseUri","protocol","host","parseQS","index","indexOf","pairs","split","pair","scrollTo","id","document","getElementById","scrollBy","getBoundingClientRect","top","stringify","stringifyHash","encodeURIComponent","stringifyQS","destroy","teardown","getState","get","init","_this","parsePath","updating","update","set","request","strict","test","addRoute","push","buildHash","mixIn","buildQS","apply","dispatch","redirect","reload","defaults","noHistory","getUri","location","pathname","search","unwatchLinks","body","removeEventListener","unwatchState","pathChange","pushState","replaceState","watchLinks","hostname","addEventListener","target","href","getAttribute","classList","contains","forEach","global","preventDefault","watchState"],"mappings":";;;;;;;;;;;CAYA,SAAWA,GACY,mBAAXC,SAA0BA,OAAOC,QAC3CD,OAAOC,QAAUF,EAAQG,QAAQ,YACL,kBAAXC,SAAyBA,OAAOC,IACjDD,QAAS,WAAaJ,GAEtBA,EAAQM,OAAOC,UAEd,SAAUA,GAWZ,QAASC,GAAMC,EAASC,EAASC,EAASC,GACzCC,KAAKJ,QAAUA,EACfI,KAAKC,IAAMC,EAAaN,GACxBI,KAAKG,OAASC,EAAgBR,GAC9BI,KAAKK,aAAeC,EAAsBV,GAC1CI,KAAKO,cAAgBV,EAAQW,OAC7BR,KAAKH,QAAUA,EACfG,KAAKF,QAAUW,GAASC,MAAQC,QAAUC,UAAad,GACvDE,KAAKa,YAAcb,KAAKF,QAAQY,GAAGI,OAAOd,KAAKF,QAAQa,KAAMX,KAAKF,QAAQc,OAC1EZ,KAAKD,OAASA,MACdC,KAAKe,KAAO,KA2Hb,QAASb,GAAaN,GACrB,OAAQA,EAAQoB,MAAM,gBAAkBf,IAAI,SAAUgB,GACrD,MAAOA,GAAKC,OAAO,KAWrB,QAASd,GAAgBR,GACxB,MAAO,IAAIuB,QACVC,EAAsBxB,GACpByB,QAAQ,aAAc,SACtBA,QAAQ,aAAc,SACxB,KAWF,QAASD,GAAsBxB,GAC9B,OAAQ,IAAMA,EAAU,KACtByB,QAAQ,sBAAuB,kBAC/BA,QAAQ,yBAA0B,SAClCA,QAAQ,MAAO,OAUlB,QAASf,GAAsBV,GAC9B,MAAO,IAAIuB,QAAOC,EAAsBxB,IAWzC,QAAS0B,GAAOC,GACfvB,KAAKwB,QAAUD,EAAQC,YACvBxB,KAAKyB,SAAWF,EAAQE,UAAY,GACpCzB,KAAK0B,GAAKH,EAAQG,GAClB1B,KAAK2B,KAAOJ,EAAQI,MAAQ,WAAc,UAC1C3B,KAAK4B,QAAUL,EAAQK,SAAWA,QAClC5B,KAAK6B,aAAeN,EAAQM,WAC5B7B,KAAK8B,aAAe,KACpB9B,KAAK+B,aAAe,KACpB/B,KAAKgC,MAAQ,KACbhC,KAAKiC,UACLjC,KAAKkC,OA0QN,QAASC,GAAeC,EAAQC,EAAQL,GACvC,MAAOI,GAAOE,OAASD,EAAOC,MAC1BF,EAAO1B,KAAO2B,EAAO3B,IACpB6B,mBAAmBH,EAAOzB,QAAU4B,mBAAmBF,EAAO1B,SAAWqB,GAASA,EAAMlC,QAAQa,KAAK6B,QAY3G,QAAS/B,GAAOgC,EAAQC,GACvB,IAAK,GAAIC,GAAI,EAAGC,EAAIC,UAAUL,OAAYI,EAAJD,EAAOA,IAC5C,IAAK,GAAIG,KAAKD,WAAUF,GACnBE,UAAUF,GAAGI,eAAeD,IAA0BE,SAApBH,UAAUF,GAAGG,KAClDL,EAAOK,GAAKD,UAAUF,GAAGG,GAK5B,OAAOL,GAUR,QAASQ,GAAQC,GAChB,MAAOC,GAAKD,EAAY,SAAUE,GACjC,OAAQC,EAAQD,KAWlB,QAASC,GAAQD,GAChB,MAAKA,IAA0B,gBAAVA,IAIbE,OAAOC,KAAKH,GAAOZ,QAHlBY,EAaV,QAASI,GAAUC,GAClB,MAAOC,OAAMC,UAAUC,MAAMC,KAAKhB,WAChCiB,KAAK,KACLzC,QAAQ,OAAQ,KAWnB,QAAS0C,GAAQrC,EAAIT,GACpB,KAAOS,GAAMA,EAAGsC,SAASC,gBAAkBhD,GAC1CS,EAAKA,EAAGwC,UAGT,OAAOxC,IAAMA,EAAGsC,SAASC,gBAAkBhD,EACxCS,EACA,KAWJ,QAASyC,GAAUxD,EAAM4C,GACxB,IACC,GAAIa,GAASnB,EAAQoB,KAAKC,MAAM/B,mBAAmB5B,EAAKO,OAAO,KAE/D,OAAOqC,GACJJ,EAAKiB,EAAQb,GACba,EACF,MAAOG,GACR,UAWF,QAASC,GAAUC,GAClB,IACC,MAAOJ,MAAKC,MAAMG,GACjB,MAAOF,GACR,MAAOE,IAAU,IAWnB,QAASC,GAASxC,GACjB,GAAIuB,GAAQvB,EAAIlB,MAAM,wDAEtB,QACC2D,SAAUlB,EAAM,IAAM,GACtBmB,KAAMnB,EAAM,IAAM,GAClBnB,KAAMmB,EAAM,IAAM,GAClB/C,GAAI+C,EAAM,IAAM,GAChB9C,KAAM8C,EAAM,IAAM,IAYpB,QAASoB,GAAQnE,EAAI6C,GACpB,GAAIuB,GAAQpE,EAAGqE,QAAQ,KACnBX,IAEJ,IAAc,KAAVU,EAIH,IAAK,GAHDE,GAAQtE,EAAGQ,OAAO4D,EAAQ,GAAGG,MAAM,KACnCC,KAEKvC,EAAI,EAAGC,EAAIoC,EAAMxC,OAAYI,EAAJD,EAAOA,IACxCuC,EAAOF,EAAMrC,GAAGsC,MAAM,KAEjB5B,EAAQ6B,EAAK,KAAU7B,EAAQmB,EAAUU,EAAK,OAClDd,EAAO7B,mBAAmB2C,EAAK,KAAOV,EAAUjC,mBAAmB2C,EAAK,KAK3E,OAAO3B,GACJJ,EAAKiB,EAAQb,GACba,EAWJ,QAASjB,GAAKV,EAAQc,GACrB,GAAI5B,KAEJ,IAAoB,kBAAT4B,GACV,IAAK,GAAIT,KAAKL,GACTA,EAAOM,eAAeD,IAAMS,EAAKd,EAAOK,GAAIA,KAC/CnB,EAAKmB,GAAKL,EAAOK,QAInB,KAAK,GAAIH,GAAI,EAAGC,EAAIW,EAAKf,OAAYI,EAAJD,EAAOA,IACvChB,EAAK4B,EAAKZ,IAAMF,EAAOc,EAAKZ,GAI9B,OAAOhB,GASR,QAASwD,GAASC,GACjB,GAAI1D,GAAK2D,SAASC,eAAeF,EAE7B1D,GACHjC,OAAO8F,SAAS,EAAG7D,EAAG8D,wBAAwBC,KAE9ChG,OAAO0F,SAAS,EAAG,GAWrB,QAASO,GAAUtC,GAClB,MAAKA,IAA0B,gBAAVA,GAIdiB,KAAKqB,UAAUtC,GAHdA,EAaT,QAASuC,GAAchE,GAGtB,MAFAA,GAAOsB,EAAQtB,GAEP0B,EAAQ1B,GAEb,GADA,KAAOiE,mBAAmBF,EAAU/D,IASxC,QAASkE,GAAYlE,GACpB,GAAIjB,GAAK,EAET,KAAK,GAAIoC,KAAKnB,GACTA,EAAKoB,eAAeD,KAAOO,EAAQ1B,EAAKmB,MAC3CpC,GAAM,IAAMkF,mBAAmB9C,GAAK,IAAM8C,mBAAmBF,EAAU/D,EAAKmB,KAI9E,OAAOpC,GACJ,IAAMA,EAAGQ,OAAO,GAChB,GAKJ,MArsBAvB,GAAMgE,UAAUmC,QAAU,WAMzB,MALI9F,MAAKe,OACRf,KAAKe,KAAKgF,WACV/F,KAAKe,KAAO,MAGNf,MASRL,EAAMgE,UAAUqC,SAAW,WAG1B,IAAK,GAFDrE,MAEKgB,EAAI,EAAGC,EAAI5C,KAAKa,YAAY2B,OAAYI,EAAJD,EAAOA,IACnDhB,EAAK3B,KAAKa,YAAY8B,IAAM3C,KAAKe,KAAKkF,IAAIjG,KAAKa,YAAY8B,GAG5D,QACCjC,GAAIyC,EAAKxB,EAAM3B,KAAKF,QAAQY,IAC5BC,KAAMwC,EAAKxB,EAAM3B,KAAKF,QAAQa,MAC9BC,MAAOuC,EAAKxB,EAAM3B,KAAKF,QAAQc,SAYjCjB,EAAMgE,UAAUuC,KAAO,SAAUhE,EAAKP,GACrC,GAAIwE,GAAQnG,IAgCZ,OA9BAS,GACCkB,EACA3B,KAAKoG,UAAUlE,EAAII,MACnBuC,EAAQ3C,EAAIxB,GAAIV,KAAKF,QAAQY,IAC7ByD,EAAUjC,EAAIvB,KAAMX,KAAKF,QAAQa,OAI7BX,KAAKO,aAITP,KAAKe,KAAO,GAAIf,MAAKH,SACpB6B,GAAI1B,KAAKD,OAAO2B,GAChBC,KAAMA,IAIH3B,KAAKa,YAAY2B,QACpBxC,KAAKe,KAAKjB,QAAQE,KAAKa,YAAYiD,KAAK,KAAM,WACxCqC,EAAME,UACVF,EAAMpG,OAAOuG,WAEVJ,MAAM,IAIZlG,KAAKe,KAAKwF,IAAI,WAAW,IAlBzBvG,KAAKH,SAAU6B,GAAI1B,KAAKD,OAAO2B,GAAIC,KAAMA,EAAMO,IAAKlC,KAAKD,OAAOmC,MAqB1DlC,MAWRL,EAAMgE,UAAU3C,MAAQ,SAAUwF,EAASC,GAC1C,MAAOA,GACJzG,KAAKK,aAAaqG,KAAKF,GACvBxG,KAAKG,OAAOuG,KAAKF,IAUrB7G,EAAMgE,UAAUyC,UAAY,SAAS9D,GAIpC,IAAK,GAHD8B,GAAS9B,EAAKtB,MAAMhB,KAAKG,QACzBwB,KAEKgB,EAAI,EAAGC,EAAI5C,KAAKC,IAAIuC,OAAYI,EAAJD,EAAOA,IACtCU,EAAQe,EAAOzB,EAAI,MACvBhB,EAAK3B,KAAKC,IAAI0C,IAAM6B,EAAUJ,EAAOzB,EAAI,IAI3C,OAAOhB,IAwFRL,EAAOqC,UAAUgD,SAAW,SAAU/G,EAASC,EAASC,GAGvD,MAFAE,MAAKiC,OAAO2E,KAAK,GAAIjH,GAAMC,EAASC,EAASC,EAASE,OAE/CA,MAURsB,EAAOqC,UAAUkD,UAAY,SAAUC,GACtC,GAAInF,GAAO3B,KAAKgC,MAAMgE,WAAWrF,IAEjC,OAAQ0C,GAAQ1B,IAAUmF,EAEvBA,EADAnB,EAAchE,IAWlBL,EAAOqC,UAAUoD,QAAU,SAAUD,GACpC,MAAOjB,GAAYpF,EAAOuG,MAAM,UAAWlG,OAAOgG,EAAO9G,KAAKgC,MAAMgE,WAAWtF,OAWhFY,EAAOqC,UAAUsD,SAAW,SAAUT,EAASjF,GAC9CA,EAAUA,KACV,IAAIW,GAAMwC,EAAS8B,GACfxE,EAAQhC,KAAKgB,MAAMkB,EAAII,MACvBF,EAASpC,KAAKkC,GAGlB,KAAKF,EACJ,MAAOhC,MAAKkH,SAASV,EAGtB,IAAIjF,EAAQ4F,QAAUhF,EAAenC,KAAKkC,IAAKA,EAAKF,GAAQ,CAE3D,GAAIoF,GAAgC,kBAAdpH,MAAK2B,KAAsB3B,KAAK2B,OAAS3B,KAAK2B,KAChEA,EAAOlB,EAAO2G,EAAU7F,EAAQX,MAAOW,EAAQZ,KAAMY,EAAQb,GAG7DV,MAAKgC,OACRhC,KAAKgC,MAAM8D,UAIZ9F,KAAKkC,IAAMA,EACXlC,KAAKgC,MAAQA,EAAMkE,KAAKhE,EAAKP,GAO9B,MAHAwD,GAASjD,EAAIvB,KAAKO,OAAO,IAGlBlB,KAAKsG,QAAQlE,EAAOE,MAAQF,EAAOE,OAASJ,EAAII,MAAOf,EAAQ8F,UAAWnF,IASlFZ,EAAOqC,UAAU2D,OAAS,WACzB,MAAOC,UAASC,SAAStG,OAAOlB,KAAKyB,SAASe,QAAU+E,SAASE,OAASF,SAAS5G,MAUpFW,EAAOqC,UAAUuC,KAAO,SAAU3E,GACjC,MAAOvB,MAAKiH,SAASjH,KAAKsH,SAAU7G,GAAS4G,WAAW,GAAQ9F,KAUjED,EAAOqC,UAAU3C,MAAQ,SAAUwF,GAGlC,IAFA,GAAI7D,GAAI,GAED3C,KAAKiC,SAASU,IACpB,GAAI3C,KAAKiC,OAAOU,GAAG3B,MAAMwF,GACxB,MAAOxG,MAAKiC,OAAOU,EAIrB,OAAO,OAURrB,EAAOqC,UAAUuD,SAAW,SAAUV,GAGrC,MAFAe,UAASC,SAAWhE,EAAUxD,KAAKyB,SAAU+E,GAEtCxG,MASRsB,EAAOqC,UAAU+D,aAAe,WAM/B,MALI1H,MAAK8B,eACRuD,SAASsC,KAAKC,oBAAoB,QAAS5H,KAAK8B,cAChD9B,KAAK8B,aAAe,MAGd9B,MASRsB,EAAOqC,UAAUkE,aAAe,WAM/B,MALI7H,MAAK+B,eACRtC,OAAOmI,oBAAoB,WAAY5H,KAAK+B,cAC5C/B,KAAK+B,aAAe,MAGd/B,MAYRsB,EAAOqC,UAAU2C,OAAS,SAAUwB,EAAYlG,EAASM,GACxD,IAAKlC,KAAKgC,MACT,MAAOhC,KAGRkC,GAAMA,IAASxB,GAAI,GAAIC,KAAM,GAC7B,IAAI2B,GAAOkB,EAAUxD,KAAKyB,SAAUzB,KAAKkC,IAAII,MACzC5B,EAAKV,KAAK+G,SAAUlC,EAAQ3C,EAAIxB,KAAMI,OAAQgH,MAAejD,EAAQ0C,SAASE,WAC9E9G,EAAOX,KAAK6G,UAAU3E,EAAIvB,MAC1B0B,EAASC,EAAO5B,EAAKC,EACrByB,EAASmF,SAASC,SAAWD,SAASE,OAASF,SAAS5G,KACxDC,EAAQZ,KAAKgC,MAAMgE,WAAWpF,KAYlC,OAXAZ,MAAKkC,IAAIxB,GAAKA,EACdV,KAAKkC,IAAIvB,KAAOA,EAEZiB,KAAY,EACf5B,KAAK4B,QAAQmG,UAAUnH,EAAO,KAAMyB,GAC1BT,KAAY,EACtB5B,KAAK4B,QAAQoG,aAAapH,EAAO,KAAMyB,GAC7BA,IAAWD,GACrBpC,KAAK4B,QAAQmG,UAAUnH,EAAO,KAAMyB,GAG9BrC,MAURsB,EAAOqC,UAAUsE,WAAa,SAAUrI,GACvCA,EAAUA,GAAW,GAAIuB,QAAO,qBAAuBoG,SAASW,SAAS7G,QAAQ,MAAO,OAAS,yBACjG,IAAI8E,GAAQnG,IAwBZ,OAtBAqF,UAASsC,KAAKQ,iBAAiB,QAASnI,KAAK0H,eAAe5F,aAAe,SAAUyC,GACpF,GAAI7C,GAAKqC,EAAQQ,EAAE6D,OAAQ,IAE3B,IAAI1G,EAAI,CACP,GAAI2G,GAAO3G,EAAG4G,aAAa,SAAW5G,EAAG4G,aAAa,YAEtD,IAAID,IAAS3G,EAAG6G,UAAUC,SAAS,kBAAoB5I,EAAQ8G,KAAK2B,GAAO,CAC1E,GAAI9G,IAAYX,SAEZuF,GAAMnE,OAASmE,EAAMnE,MAAMjB,MAC9BoF,EAAM3E,QAAQiH,QAAQ,SAAUC,GAC/BnH,EAAQX,MAAM8H,GAAUvC,EAAMnE,MAAMjB,KAAKkF,IAAIyC,KAI/CvC,EAAMc,SAASoB,EAAM9G,GAErBgD,EAAEoE,qBAKE3I,MASRsB,EAAOqC,UAAUiF,WAAa,WAC7B,GAAIzC,GAAQnG,IAQZ,OANAP,QAAO0I,iBAAiB,WAAYnI,KAAK6H,eAAe9F,aAAe,SAASwC,GAC3EA,EAAE3D,OACLuF,EAAMD,MAAOtF,MAAO2D,EAAE3D,UAIjBZ,MAkRRsB,EAAO3B,MAAQA,EACRD,EAAQ4B,OAASA"}