var stats={intialize:function(){stats.buildStats(),stats.addVariables(),stats.addHoverEffects(),stats.setTimeline()},setTimeline:function(){timelineStat=timelinesArray[0],stats.registerElementsAndFunctions(),stats.tests(),stats.updateTimeline()},buildStats:function(){var a=document.getElementsByClassName("banner")[0],b=document.createElement("div");b.id="stats",b.style.width="300px",b.style.height="130px",b.style.backgroundColor="#ccc",b.style.position="fixed",b.style.bottom=0,b.style.right=0,b.style.opacity=.5,b.style.borderRadius="10px",a.parentNode.insertBefore(b,a.nextSibling),b.onmouseover=function(){this.style.opacity=1},b.onmouseout=function(){this.style.opacity=.5},b.innerHTML="<p id='currenttime' style='color:#666;font-size:30px;position:absolute;bottom:85px;left:14px;opacity:0.5;'>00.00</p><p id='totaltime' style='color:#666;font-size:20px;position:absolute;bottom:88px;left:101px;opacity:0.5;'>00.00</p><input id='slider-timeline' type='range' min='0' step='0.01' max='274' value='0' style='position:absolute;bottom:60px;width:274px;left:10px;'/><select id='flags' style='position:absolute;bottom:20px;right:14px;width:120px;'></select><select id='timelines' style='position:absolute;bottom:90px;right:14px;width:120px;'></select><span id='play' style='color:#fff;font-size:16px;position:absolute;bottom:10px;left:14px;cursor:pointer;background-color:#999;padding:10px 8px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:46px;text-align:center'>Play</span><span id='restart' style='color:#fff;font-size:16px;position:absolute;bottom:10px;left:84px;cursor:pointer;background-color: #999;padding:10px 8px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;'>Restart</span>"},addVariables:function(){statDiv=document.getElementById("stats"),playButton=document.getElementById("play"),restartButton=document.getElementById("restart"),sliderTimeline=document.getElementById("slider-timeline"),selectTimeline=document.getElementById("flags"),selectTimelines=document.getElementById("timelines"),totalTimeTimeline=document.getElementById("totaltime"),currenttimeTimeline=document.getElementById("currenttime")},addHoverEffects:function(){playButton.onmouseover=function(){this.style.backgroundColor="#666666"},playButton.onmouseout=function(){this.style.backgroundColor="#999999"},restartButton.onmouseover=function(){this.style.backgroundColor="#666666"},restartButton.onmouseout=function(){this.style.backgroundColor="#999999"}},registerElementsAndFunctions:function(){function a(a){a.target!=sliderTimeline&&(initX=this.offsetLeft,initY=this.offsetTop,mousePressX=event.clientX,mousePressY=event.clientY,this.addEventListener("mousemove",b,!1),window.addEventListener("mouseup",function(){statDiv.removeEventListener("mousemove",b,!1),statDiv.style.cursor="default"},!1))}function b(a){statDiv.style.cursor="move",this.style.left=initX+a.clientX-mousePressX+"px",this.style.top=initY+a.clientY-mousePressY+"px"}function c(){1==timelineStat.paused()?(timelineStat.totalDuration()==timelineStat.time()?timelineStat.restart():timelineStat.play(),playButton.innerHTML="Pause"):(timelineStat.pause(),playButton.innerHTML="Play")}function d(){timelineStat.restart()}function e(){timelineStat.seek(flags.options[flags.selectedIndex].text).play()}function f(){timelineStat.seek(this.value),currenttimeTimeline.innerHTML=timelineStat.time().toFixed(2)}function g(){timelineStat=timelinesArray[selectTimelines.options[selectTimelines.selectedIndex].value],stats.updateTimeline()}statDiv.addEventListener("mousedown",a),playButton.addEventListener("click",c),restartButton.addEventListener("click",d),flags.addEventListener("change",e),selectTimelines.addEventListener("change",g),sliderTimeline.addEventListener("mousemove",f),sliderTimeline.addEventListener("change",f)},tests:function(){for(var a,b=0;b<timelinesArray.length;b++)a+='<option value="'+b+'">'+timelinesNameArray[b]+"</option>",timelinesArray[b].eventCallback("onStart",stats.updateCurrentTimeline);selectTimelines.innerHTML=a},updateTimeline:function(){for(var b,a=timelineStat.getLabelsArray(),c=0;c<a.length;c++)b+='<option value="'+a[c].time+'">'+a[c].name+"</option>";flags.innerHTML=b,currenttimeTimeline.innerHTML=timelineStat.time().toFixed(2),totalTimeTimeline.innerHTML=timelineStat.totalDuration().toFixed(2),sliderTimeline.max=timelineStat.totalDuration().toFixed(2),timelineStat.eventCallback("onUpdate",stats.updateCurrentTime),timelineStat.eventCallback("onComplete",stats.updateCompleted)},updateCurrentTime:function(){currenttimeTimeline.innerHTML=timelineStat.time().toFixed(2),sliderTimeline.value=timelineStat.time().toFixed(2),playButton.innerHTML="Pause"},updateCurrentTimeline:function(){timelineStat=this,selectTimelines.options[timelinesArray.indexOf(this)].selected=!0,stats.updateTimeline()},updateCompleted:function(){playButton.innerHTML="Play",timelineStat.pause()}};stats.intialize();