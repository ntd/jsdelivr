!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.algoliasearchHelper=e()}}(function(){return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){"use strict";function n(e,t,n){return new r(e,t,n)}var r=e("./src/algoliasearch.helper");n.version="2.0.0-rc1",t.exports=n},{"./src/algoliasearch.helper":71}],2:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),c=1;i>c;c++)a[c-1]=arguments[c];n.apply(this,a)}else if(s(n)){for(i=arguments.length,a=new Array(i-1),c=1;i>c;c++)a[c-1]=arguments[c];for(u=n.slice(),i=u.length,c=0;i>c;c++)u[c].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],4:[function(e,t){function n(){if(!o){o=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}o=!1}}function r(){}var i=t.exports={},s=[],o=!1;i.nextTick=function(e){s.push(e),o||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],5:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],6:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),c(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var s=u(e,t);if(s)return s;var o=Object.keys(t),g=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),_(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(t);if(0===o.length){if(E(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(R(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(F(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return f(t)}var y="",m=!1,j=["{","}"];if(d(t)&&(m=!0,j=["[","]"]),E(t)){var x=t.name?": "+t.name:"";y=" [Function"+x+"]"}if(R(t)&&(y=" "+RegExp.prototype.toString.call(t)),F(t)&&(y=" "+Date.prototype.toUTCString.call(t)),_(t)&&(y=" "+f(t)),0===o.length&&(!m||0==t.length))return j[0]+y+j[1];if(0>r)return R(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=m?l(e,t,r,g,o):o.map(function(n){return p(e,t,r,g,n,m)}),e.seen.pop(),h(w,y,j)}function u(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var s=[],o=0,a=t.length;a>o;++o)s.push(P(t,String(o))?p(e,t,n,r,String(o),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,a,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),P(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=v(n)?c(e,u.value,null):c(e,u.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),x(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function j(e){return"symbol"==typeof e}function x(e){return void 0===e}function R(e){return w(e)&&"[object RegExp]"===A(e)}function w(e){return"object"==typeof e&&null!==e}function F(e){return w(e)&&"[object Date]"===A(e)}function _(e){return w(e)&&("[object Error]"===A(e)||e instanceof Error)}function E(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function S(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),a=r[n];s>n;a=r[++n])o+=v(a)||!w(a)?" "+a:" "+i(a);return o},n.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(x(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var k,M={};n.debuglog=function(e){if(x(k)&&(k=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(k)){var r=t.pid;M[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else M[e]=function(){};return M[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=v,n.isNullOrUndefined=y,n.isNumber=m,n.isString=b,n.isSymbol=j,n.isUndefined=x,n.isRegExp=R,n.isObject=w,n.isDate=F,n.isError=_,n.isFunction=E,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:4,inherits:3}],7:[function(e,t){function n(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var s=e[t];s&&(i[++r]=s)}return i}t.exports=n},{}],8:[function(e,t){function n(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&o(e)?r(e,t):i(e,s(t,n,3))}var r=e("../internal/arrayEach"),i=e("../internal/baseEach"),s=e("../internal/bindCallback"),o=e("../lang/isArray");t.exports=n},{"../internal/arrayEach":13,"../internal/baseEach":17,"../internal/bindCallback":31,"../lang/isArray":56}],9:[function(e,t){function n(e,t,n,c){var u=a(e)?r:o;return u(e,i(t,c,4),n,arguments.length<3,s)}var r=e("../internal/arrayReduce"),i=e("../internal/baseCallback"),s=e("../internal/baseEach"),o=e("../internal/baseReduce"),a=e("../lang/isArray");t.exports=n},{"../internal/arrayReduce":14,"../internal/baseCallback":15,"../internal/baseEach":17,"../internal/baseReduce":27,"../lang/isArray":56}],10:[function(e,t){var n=e("../lang/isNative"),r=n(r=Date.now)&&r,i=r||function(){return(new Date).getTime()};t.exports=i},{"../lang/isNative":59}],11:[function(e,t){function n(e,t){var c=o;if(arguments.length>2){var u=r(arguments,2),f=s(u,n.placeholder);c|=a}return i(e,c,t,u,f)}var r=e("../internal/baseSlice"),i=e("../internal/createWrapper"),s=e("../internal/replaceHolders"),o=1,a=32;n.placeholder={},t.exports=n},{"../internal/baseSlice":29,"../internal/createWrapper":38,"../internal/replaceHolders":51}],12:[function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=n},{}],13:[function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],14:[function(e,t){function n(e,t,n,r){var i=-1,s=e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}t.exports=n},{}],15:[function(e,t){function n(e,t,n){var u=typeof e;return"function"==u?"undefined"!=typeof t&&c(e)?o(e,t,n):e:null==e?a:"object"==u?r(e):"undefined"==typeof t?s(e+""):i(e+"",t)}var r=e("./baseMatches"),i=e("./baseMatchesProperty"),s=e("./baseProperty"),o=e("./bindCallback"),a=e("../utility/identity"),c=e("./isBindable");t.exports=n},{"../utility/identity":67,"./baseMatches":24,"./baseMatchesProperty":25,"./baseProperty":26,"./bindCallback":31,"./isBindable":43}],16:[function(e,t){(function(n){var r=e("../lang/isObject"),i=function(){function e(){}return function(t){if(r(t)){e.prototype=t;var i=new e;e.prototype=null}return i||n.Object()}}();t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isObject":60}],17:[function(e,t){function n(e,t){var n=e?e.length:0;if(!i(n))return r(e,t);for(var o=-1,a=s(e);++o<n&&t(a[o],o,a)!==!1;);return e}var r=e("./baseForOwn"),i=e("./isLength"),s=e("./toObject");t.exports=n},{"./baseForOwn":19,"./isLength":45,"./toObject":54}],18:[function(e,t){function n(e,t,n){for(var i=-1,s=r(e),o=n(e),a=o.length;++i<a;){var c=o[i];if(t(s[c],c,s)===!1)break}return e}var r=e("./toObject");t.exports=n},{"./toObject":54}],19:[function(e,t){function n(e,t){return r(e,t,i)}var r=e("./baseFor"),i=e("../object/keys");t.exports=n},{"../object/keys":63,"./baseFor":18}],20:[function(e,t){function n(e,t,i,s,o,a){if(e===t)return 0!==e||1/e==1/t;var c=typeof e,u=typeof t;return"function"!=c&&"object"!=c&&"function"!=u&&"object"!=u||null==e||null==t?e!==e&&t!==t:r(e,t,n,i,s,o,a)}var r=e("./baseIsEqualDeep");t.exports=n},{"./baseIsEqualDeep":21}],21:[function(e,t){function n(e,t,n,l,d,g,v){var y=o(e),m=o(t),b=u,j=u;y||(b=h.call(e),b==c?b=f:b!=f&&(y=a(e))),m||(j=h.call(t),j==c?j=f:j!=f&&(m=a(t)));var x=b==f,R=j==f,w=b==j;if(w&&!y&&!x)return i(e,t,b);var F=x&&p.call(e,"__wrapped__"),_=R&&p.call(t,"__wrapped__");if(F||_)return n(F?e.value():e,_?t.value():t,l,d,g,v);if(!w)return!1;g||(g=[]),v||(v=[]);for(var E=g.length;E--;)if(g[E]==e)return v[E]==t;g.push(e),v.push(t);var O=(y?r:s)(e,t,n,l,d,g,v);return g.pop(),v.pop(),O}var r=e("./equalArrays"),i=e("./equalByTag"),s=e("./equalObjects"),o=e("../lang/isArray"),a=e("../lang/isTypedArray"),c="[object Arguments]",u="[object Array]",f="[object Object]",l=Object.prototype,p=l.hasOwnProperty,h=l.toString;t.exports=n},{"../lang/isArray":56,"../lang/isTypedArray":62,"./equalArrays":39,"./equalByTag":40,"./equalObjects":41}],22:[function(e,t){function n(e){return"function"==typeof e||!1}t.exports=n},{}],23:[function(e,t){function n(e,t,n,i,o){var a=t.length;if(null==e)return!a;for(var c=-1,u=!o;++c<a;)if(u&&i[c]?n[c]!==e[t[c]]:!s.call(e,t[c]))return!1;for(c=-1;++c<a;){var f=t[c];if(u&&i[c])var l=s.call(e,f);else{var p=e[f],h=n[c];l=o?o(p,h,f):void 0,"undefined"==typeof l&&(l=r(h,p,o,!0))}if(!l)return!1}return!0}var r=e("./baseIsEqual"),i=Object.prototype,s=i.hasOwnProperty;t.exports=n},{"./baseIsEqual":20}],24:[function(e,t){function n(e){var t=s(e),n=t.length;if(1==n){var o=t[0],c=e[o];if(i(c))return function(e){return null!=e&&e[o]===c&&a.call(e,o)}}for(var u=Array(n),f=Array(n);n--;)c=e[t[n]],u[n]=c,f[n]=i(c);return function(e){return r(e,t,u,f)}}var r=e("./baseIsMatch"),i=e("./isStrictComparable"),s=e("../object/keys"),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"../object/keys":63,"./baseIsMatch":23,"./isStrictComparable":47}],25:[function(e,t){function n(e,t){return i(t)?function(n){return null!=n&&n[e]===t}:function(n){return null!=n&&r(t,n[e],null,!0)}}var r=e("./baseIsEqual"),i=e("./isStrictComparable");t.exports=n},{"./baseIsEqual":20,"./isStrictComparable":47}],26:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],27:[function(e,t){function n(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}t.exports=n},{}],28:[function(e,t){var n=e("../utility/identity"),r=e("./metaMap"),i=r?function(e,t){return r.set(e,t),e}:n;t.exports=i},{"../utility/identity":67,"./metaMap":49}],29:[function(e,t){function n(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n="undefined"==typeof n||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}t.exports=n},{}],30:[function(e,t){function n(e){return"string"==typeof e?e:null==e?"":e+""}t.exports=n},{}],31:[function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}var r=e("../utility/identity");t.exports=n},{"../utility/identity":67}],32:[function(e,t){function n(e,t,n){for(var i=n.length,s=-1,o=r(e.length-i,0),a=-1,c=t.length,u=Array(o+c);++a<c;)u[a]=t[a];for(;++s<i;)u[n[s]]=e[s];for(;o--;)u[a++]=e[s++];return u}var r=Math.max;t.exports=n},{}],33:[function(e,t){function n(e,t,n){for(var i=-1,s=n.length,o=-1,a=r(e.length-s,0),c=-1,u=t.length,f=Array(a+u);++o<a;)f[o]=e[o];for(var l=o;++c<u;)f[l+c]=t[c];for(;++i<s;)f[l+n[i]]=e[o++];return f}var r=Math.max;t.exports=n},{}],34:[function(e,t){(function(n){function r(e,t){function r(){var i=this&&this!==n&&this instanceof r?s:e;return i.apply(t,arguments)}var s=i(e);return r}var i=e("./createCtorWrapper");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":35}],35:[function(e,t){function n(e){return function(){var t=r(e.prototype),n=e.apply(t,arguments);return i(n)?n:t}}var r=e("./baseCreate"),i=e("../lang/isObject");t.exports=n},{"../lang/isObject":60,"./baseCreate":16}],36:[function(e,t){(function(n){function r(e,t,b,j,x,R,w,F,_,E){function O(){for(var p=arguments.length,h=p,d=Array(p);h--;)d[h]=arguments[h];if(j&&(d=s(d,j,x)),R&&(d=o(d,R,w)),P||k){var y=O.placeholder,T=u(d,y);if(p-=T.length,E>p){var I=F?i(F):null,C=m(E-p,0),q=P?T:null,z=P?null:T,H=P?d:null,W=P?null:d;t|=P?g:v,t&=~(P?v:g),D||(t&=~(f|l));var B=r(e,t,b,H,q,W,z,I,_,C);return B.placeholder=y,B}}var U=S?b:this;L&&(e=U[N]),F&&(d=c(d,F)),A&&_<d.length&&(d.length=_);var Q=this&&this!==n&&this instanceof O?M||a(e):e;return Q.apply(U,d)}var A=t&y,S=t&f,L=t&l,P=t&h,D=t&p,k=t&d,M=!L&&a(e),N=e;return O}var i=e("./arrayCopy"),s=e("./composeArgs"),o=e("./composeArgsRight"),a=e("./createCtorWrapper"),c=e("./reorder"),u=e("./replaceHolders"),f=1,l=2,p=4,h=8,d=16,g=32,v=64,y=256,m=Math.max;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./arrayCopy":12,"./composeArgs":32,"./composeArgsRight":33,"./createCtorWrapper":35,"./reorder":50,"./replaceHolders":51}],37:[function(e,t){(function(n){function r(e,t,r,o){function a(){for(var t=-1,i=arguments.length,s=-1,f=o.length,l=Array(i+f);++s<f;)l[s]=o[s];for(;i--;)l[s++]=arguments[++t];var p=this&&this!==n&&this instanceof a?u:e;return p.apply(c?r:this,l)}var c=t&s,u=i(e);return a}var i=e("./createCtorWrapper"),s=1;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":35}],38:[function(e,t){function n(e,t,n,v,y,m,b,j){var x=t&l;if(!x&&"function"!=typeof e)throw new TypeError(d);var R=v?v.length:0;if(R||(t&=~(p|h),v=y=null),R-=y?y.length:0,t&h){var w=v,F=y;v=y=null}var _=!x&&a(e),E=[e,t,n,v,y,w,F,m,b,j];if(_&&_!==!0&&(c(E,_),t=E[1],j=E[9]),E[9]=null==j?x?0:e.length:g(j-R,0)||0,t==f)var O=i(E[0],E[2]);else O=t!=p&&t!=(f|p)||E[4].length?s.apply(void 0,E):o.apply(void 0,E);var A=_?r:u;return A(O,E)}var r=e("./baseSetData"),i=e("./createBindWrapper"),s=e("./createHybridWrapper"),o=e("./createPartialWrapper"),a=e("./getData"),c=e("./mergeData"),u=e("./setData"),f=1,l=2,p=32,h=64,d="Expected a function",g=Math.max;t.exports=n},{"./baseSetData":28,"./createBindWrapper":34,"./createHybridWrapper":36,"./createPartialWrapper":37,"./getData":42,"./mergeData":48,"./setData":52}],39:[function(e,t){function n(e,t,n,r,i,s,o){var a=-1,c=e.length,u=t.length,f=!0;if(c!=u&&!(i&&u>c))return!1;for(;f&&++a<c;){var l=e[a],p=t[a];if(f=void 0,r&&(f=i?r(p,l,a):r(l,p,a)),"undefined"==typeof f)if(i)for(var h=u;h--&&(p=t[h],!(f=l&&l===p||n(l,p,r,i,s,o))););else f=l&&l===p||n(l,p,r,i,s,o)}return!!f}t.exports=n},{}],40:[function(e,t){function n(e,t,n){switch(n){case r:case i:return+e==+t;case s:return e.name==t.name&&e.message==t.message;case o:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case a:case c:return e==t+""}return!1}var r="[object Boolean]",i="[object Date]",s="[object Error]",o="[object Number]",a="[object RegExp]",c="[object String]";t.exports=n},{}],41:[function(e,t){function n(e,t,n,i,o,a,c){var u=r(e),f=u.length,l=r(t),p=l.length;if(f!=p&&!o)return!1;for(var h,d=-1;++d<f;){var g=u[d],v=s.call(t,g);if(v){var y=e[g],m=t[g];v=void 0,i&&(v=o?i(m,y,g):i(y,m,g)),"undefined"==typeof v&&(v=y&&y===m||n(y,m,i,o,a,c))}if(!v)return!1;h||(h="constructor"==g)}if(!h){var b=e.constructor,j=t.constructor;if(b!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof j&&j instanceof j))return!1}return!0}var r=e("../object/keys"),i=Object.prototype,s=i.hasOwnProperty;t.exports=n},{"../object/keys":63}],42:[function(e,t){var n=e("./metaMap"),r=e("../utility/noop"),i=n?function(e){return n.get(e)}:r;t.exports=i},{"../utility/noop":68,"./metaMap":49}],43:[function(e,t){function n(e){var t=!(s.funcNames?e.name:s.funcDecomp);if(!t){var n=c.call(e);s.funcNames||(t=!o.test(n)),t||(t=a.test(n)||i(e),r(e,t))}return t}var r=e("./baseSetData"),i=e("../lang/isNative"),s=e("../support"),o=/^\s*function[ \n\r\t]+\w/,a=/\bthis\b/,c=Function.prototype.toString;t.exports=n},{"../lang/isNative":59,"../support":66,"./baseSetData":28}],44:[function(e,t){function n(e,t){return e=+e,t=null==t?r:t,e>-1&&e%1==0&&t>e}var r=Math.pow(2,53)-1;t.exports=n},{}],45:[function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=Math.pow(2,53)-1;t.exports=n},{}],46:[function(e,t){function n(e){return e&&"object"==typeof e||!1}t.exports=n},{}],47:[function(e,t){function n(e){return e===e&&(0===e?1/e>0:!r(e))}var r=e("../lang/isObject");t.exports=n},{"../lang/isObject":60}],48:[function(e,t){function n(e,t){var n=e[1],g=t[1],v=n|g,y=p|l,m=a|c,b=y|m|u|f,j=n&p&&!(g&p),x=n&l&&!(g&l),R=(x?e:t)[7],w=(j?e:t)[8],F=!(n>=l&&g>m||n>m&&g>=l),_=v>=y&&b>=v&&(l>n||(x||j)&&R.length<=w);if(!F&&!_)return e;g&a&&(e[2]=t[2],v|=n&a?0:u);var E=t[3];if(E){var O=e[3];e[3]=O?i(O,E,t[4]):r(E),e[4]=O?o(e[3],h):r(t[4])}return E=t[5],E&&(O=e[5],e[5]=O?s(O,E,t[6]):r(E),e[6]=O?o(e[5],h):r(t[6])),E=t[7],E&&(e[7]=r(E)),g&p&&(e[8]=null==e[8]?t[8]:d(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}var r=e("./arrayCopy"),i=e("./composeArgs"),s=e("./composeArgsRight"),o=e("./replaceHolders"),a=1,c=2,u=4,f=16,l=128,p=256,h="__lodash_placeholder__",d=Math.min;t.exports=n},{"./arrayCopy":12,"./composeArgs":32,"./composeArgsRight":33,"./replaceHolders":51}],49:[function(e,t){(function(n){var r=e("../lang/isNative"),i=r(i=n.WeakMap)&&i,s=i&&new i;t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isNative":59}],50:[function(e,t){function n(e,t){for(var n=e.length,o=s(t.length,n),a=r(e);o--;){var c=t[o];e[o]=i(c,n)?a[c]:void 0}return e}var r=e("./arrayCopy"),i=e("./isIndex"),s=Math.min;t.exports=n},{"./arrayCopy":12,"./isIndex":44}],51:[function(e,t){function n(e,t){for(var n=-1,i=e.length,s=-1,o=[];++n<i;)e[n]===t&&(e[n]=r,o[++s]=n);return o}var r="__lodash_placeholder__";t.exports=n},{}],52:[function(e,t){var n=e("./baseSetData"),r=e("../date/now"),i=150,s=16,o=function(){var e=0,t=0;return function(o,a){var c=r(),u=s-(c-t);if(t=c,u>0){if(++e>=i)return o}else e=0;return n(o,a)}}();t.exports=o},{"../date/now":10,"./baseSetData":28}],53:[function(e,t){function n(e){for(var t=a(e),n=t.length,u=n&&e.length,l=u&&o(u)&&(i(e)||c.nonEnumArgs&&r(e)),p=-1,h=[];++p<n;){var d=t[p];(l&&s(d,u)||f.call(e,d))&&h.push(d)}return h}var r=e("../lang/isArguments"),i=e("../lang/isArray"),s=e("./isIndex"),o=e("./isLength"),a=e("../object/keysIn"),c=e("../support"),u=Object.prototype,f=u.hasOwnProperty;t.exports=n},{"../lang/isArguments":55,"../lang/isArray":56,"../object/keysIn":64,"../support":66,"./isIndex":44,"./isLength":45}],54:[function(e,t){function n(e){return r(e)?e:Object(e)}var r=e("../lang/isObject");t.exports=n},{"../lang/isObject":60}],55:[function(e,t){function n(e){var t=i(e)?e.length:void 0;return r(t)&&a.call(e)==s||!1}var r=e("../internal/isLength"),i=e("../internal/isObjectLike"),s="[object Arguments]",o=Object.prototype,a=o.toString;t.exports=n},{"../internal/isLength":45,"../internal/isObjectLike":46}],56:[function(e,t){var n=e("../internal/isLength"),r=e("./isNative"),i=e("../internal/isObjectLike"),s="[object Array]",o=Object.prototype,a=o.toString,c=r(c=Array.isArray)&&c,u=c||function(e){return i(e)&&n(e.length)&&a.call(e)==s||!1};t.exports=u},{"../internal/isLength":45,"../internal/isObjectLike":46,"./isNative":59}],57:[function(e,t){function n(e){if(null==e)return!0;var t=e.length;return o(t)&&(i(e)||c(e)||r(e)||a(e)&&s(e.splice))?!t:!u(e).length}var r=e("./isArguments"),i=e("./isArray"),s=e("./isFunction"),o=e("../internal/isLength"),a=e("../internal/isObjectLike"),c=e("./isString"),u=e("../object/keys");t.exports=n},{"../internal/isLength":45,"../internal/isObjectLike":46,"../object/keys":63,"./isArguments":55,"./isArray":56,"./isFunction":58,"./isString":61}],58:[function(e,t){(function(n){var r=e("../internal/baseIsFunction"),i=e("./isNative"),s="[object Function]",o=Object.prototype,a=o.toString,c=i(c=n.Uint8Array)&&c,u=r(/x/)||c&&!r(c)?function(e){return a.call(e)==s}:r;t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/baseIsFunction":22,"./isNative":59}],59:[function(e,t){function n(e){return null==e?!1:u.call(e)==s?f.test(c.call(e)):i(e)&&o.test(e)||!1}var r=e("../string/escapeRegExp"),i=e("../internal/isObjectLike"),s="[object Function]",o=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,u=a.toString,f=RegExp("^"+r(u).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isObjectLike":46,"../string/escapeRegExp":65}],60:[function(e,t){function n(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}t.exports=n},{}],61:[function(e,t){function n(e){return"string"==typeof e||r(e)&&o.call(e)==i||!1}var r=e("../internal/isObjectLike"),i="[object String]",s=Object.prototype,o=s.toString;t.exports=n},{"../internal/isObjectLike":46}],62:[function(e,t){function n(e){return i(e)&&r(e.length)&&A[L.call(e)]||!1}var r=e("../internal/isLength"),i=e("../internal/isObjectLike"),s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Function]",l="[object Map]",p="[object Number]",h="[object Object]",d="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",m="[object ArrayBuffer]",b="[object Float32Array]",j="[object Float64Array]",x="[object Int8Array]",R="[object Int16Array]",w="[object Int32Array]",F="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",O="[object Uint32Array]",A={};A[b]=A[j]=A[x]=A[R]=A[w]=A[F]=A[_]=A[E]=A[O]=!0,A[s]=A[o]=A[m]=A[a]=A[c]=A[u]=A[f]=A[l]=A[p]=A[h]=A[d]=A[g]=A[v]=A[y]=!1;var S=Object.prototype,L=S.toString;t.exports=n},{"../internal/isLength":45,"../internal/isObjectLike":46}],63:[function(e,t){var n=e("../internal/isLength"),r=e("../lang/isNative"),i=e("../lang/isObject"),s=e("../internal/shimKeys"),o=r(o=Object.keys)&&o,a=o?function(e){if(e)var t=e.constructor,r=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r&&n(r)?s(e):i(e)?o(e):[]}:s;t.exports=a},{"../internal/isLength":45,"../internal/shimKeys":53,"../lang/isNative":59,"../lang/isObject":60}],64:[function(e,t){function n(e){if(null==e)return[];a(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(i(e)||c.nonEnumArgs&&r(e))&&t||0;for(var n=e.constructor,u=-1,l="function"==typeof n&&n.prototype===e,p=Array(t),h=t>0;++u<t;)p[u]=u+"";for(var d in e)h&&s(d,t)||"constructor"==d&&(l||!f.call(e,d))||p.push(d);return p}var r=e("../lang/isArguments"),i=e("../lang/isArray"),s=e("../internal/isIndex"),o=e("../internal/isLength"),a=e("../lang/isObject"),c=e("../support"),u=Object.prototype,f=u.hasOwnProperty;t.exports=n},{"../internal/isIndex":44,"../internal/isLength":45,"../lang/isArguments":55,"../lang/isArray":56,"../lang/isObject":60,"../support":66}],65:[function(e,t){function n(e){return e=r(e),e&&s.test(e)?e.replace(i,"\\$&"):e}var r=e("../internal/baseToString"),i=/[.*+?^${}()|[\]\/\\]/g,s=RegExp(i.source);t.exports=n},{"../internal/baseToString":30}],66:[function(e,t){(function(n){var r=e("./lang/isNative"),i=/\bthis\b/,s=Object.prototype,o=(o=n.window)&&o.document,a=s.propertyIsEnumerable,c={};!function(){c.funcDecomp=!r(n.WinRTError)&&i.test(function(){return this}),c.funcNames="string"==typeof Function.name;try{c.dom=11===o.createDocumentFragment().nodeType}catch(e){c.dom=!1}try{c.nonEnumArgs=!a.call(arguments,1)}catch(e){c.nonEnumArgs=!0}}(0,0),t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lang/isNative":59}],67:[function(e,t){function n(e){return e}t.exports=n},{}],68:[function(e,t){function n(){}t.exports=n},{}],69:[function(e,t){"use strict";var n=e("lodash/object/keys"),r=e("lodash/collection/forEach"),i=e("lodash/collection/reduce"),s=e("lodash/lang/isEmpty"),o=function(e){var t=e||{};this.query=t.query||"",this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.hitsPerPage=t.hitsPerPage||20,this.maxValuesPerFacet=t.maxValuesPerFacet||10,this.page=t.page||0,this.queryType=t.queryType,this.typoTolerance=t.typoTolerance,this.minWordSizefor1Typo=t.minWordSizefor1Typo,this.minWordSizefor2Typos=t.minWordSizefor2Typos,this.allowTyposOnNumericTokens=t.allowTyposOnNumericTokens,this.ignorePlurals=t.ignorePlurals,
this.restrictSearchableAttributes=t.restrictSearchableAttributes,this.advancedSyntax=t.advancedSyntax,this.analytics=t.analytics,this.analyticsTags=t.analyticsTags,this.synonyms=t.synonyms,this.replaceSynonymsInHighlight=t.replaceSynonymsInHighlight,this.optionalWords=t.optionalWords,this.removeWordsIfNoResults=t.removeWordsIfNoResults,this.attributesToRetrieve=t.attributesToRetrieve,this.attributesToHighlight=t.attributesToHighlight,this.attributesToSnippet=t.attributesToSnippet,this.getRankingInfo=t.getRankingInfo,this.tagFilters=t.tagFilters,this.distinct=t.distinct,this.aroundLatLng=t.aroundLatLng,this.aroundLatLngViaIP=t.aroundLatLngViaIP,this.aroundRadius=t.aroundRadius,this.aroundPrecision=t.aroundPrecision,this.insideBoundingBox=t.insideBoundingBox};o.prototype={constructor:o,clearRefinements:function(){return this.mutateMe(function(e){e.facetsRefinements={},e.facetsExcludes={},e.disjunctiveFacetsRefinements={},e.numericRefinements={}})},setQuery:function(e){return this.mutateMe(function(t){t.query=e})},setPage:function(e){return this.mutateMe(function(t){t.page=e})},setFacets:function(e){return this.mutateMe(function(t){t.facets=e})},setDisjunctiveFacets:function(e){return this.mutateMe(function(t){t.disjunctiveFacets=e})},setHitsPerPage:function(e){return this.mutateMe(function(t){t.HitsPerPage=e})},addNumericRefinement:function(e,t,n){return this.mutateMe(function(r){r.numericRefinements[e]||(r.numericRefinements[e]={}),r.numericRefinements[e][t]=n})},removeNumericRefinement:function(e,t){return this.mutateMe(function(n){if(n.numericRefinements[e]){var r=n.numericRefinements[e][t];r&&(delete n.numericRefinements[e][t],s(n.numericRefinements[e])&&delete n.numericRefinements[e])}})},addFacetRefinement:function(e,t){return this.mutateMe(function(n){n.facetsRefinements[e]=t})},addExcludeRefinement:function(e,t){return this.mutateMe(function(n){n.facetsExcludes[e]||(n.facetsExcludes[e]=[]),n.facetsExcludes[e].push(t)})},addDisjunctiveFacetRefinement:function(e,t){return this.mutateMe(function(n){n.disjunctiveFacetsRefinements[e]||(n.disjunctiveFacetsRefinements[e]=[]),n.disjunctiveFacetsRefinements[e].push(t)})},removeFacetRefinement:function(e){return this.mutateMe(function(t){delete t.facetsRefinements[e]})},removeExcludeRefinement:function(e,t){return this.mutateMe(function(n){if(n.facetsExcludes[e]){var r=n.facetsExcludes[e].indexOf(t);r>-1&&(n.facetsExcludes[e].splice(r,1),0===n.facetsExcludes[e].length&&delete n.facetsExcludes[e])}})},removeDisjunctiveFacetRefinement:function(e,t){return this.mutateMe(function(n){if(n.disjunctiveFacetsRefinements[e]){var r=n.disjunctiveFacetsRefinements[e].indexOf(t);r>-1&&(n.disjunctiveFacetsRefinements[e].splice(r,1),0===n.disjunctiveFacetsRefinements[e].length&&delete n.disjunctiveFacetsRefinements[e])}})},toggleFacetRefinement:function(e,t){return this.isFacetRefined(e,t)?this.removeFacetRefinement(e):this.addFacetRefinement(e,t)},toggleExcludeFacetRefinement:function(e,t){return this.isExcludeRefined(e,t)?this.removeExcludeRefinement(e,t):this.addExcludeRefinement(e,t)},toggleDisjunctiveFacetRefinement:function(e,t){return this.isDisjunctiveFacetRefined(e,t)?this.removeDisjunctiveFacetRefinement(e,t):this.addDisjunctiveFacetRefinement(e,t)},isFacetRefined:function(e,t){return this.facetsRefinements[e]===t},isExcludeRefined:function(e,t){return this.facetsExcludes[e]&&-1!==this.facetsExcludes[e].indexOf(t)},isDisjunctiveFacetRefined:function(e,t){return this.disjunctiveFacetsRefinements[e]&&-1!==this.disjunctiveFacetsRefinements[e].indexOf(t)},getRefinedDisjunctiveFacets:function(){return n(this.disjunctiveFacetsRefinements)},getUnrefinedDisjunctiveFacets:function(){var e=[],t=this.getRefinedDisjunctiveFacets();return r(this.disjunctiveFacets,function(n){-1===t.indexOf(n)&&e.push(n)}),e},managedParameters:["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements"],getQueryParams:function(){var e=this.managedParameters;return i(this,function(t,n,r,i){return-1===e.indexOf(r)&&void 0!==i[r]&&(t[r]=n),t},{})},mutateMe:function(e){var t=new this.constructor(this);return e(t),Object.freeze(t)}},t.exports=o},{"lodash/collection/forEach":8,"lodash/collection/reduce":9,"lodash/lang/isEmpty":57,"lodash/object/keys":63}],70:[function(e,t){function n(e){var t={};return r(e,function(e,n){t[e]=n}),t}var r=e("lodash/collection/forEach"),i=e("lodash/array/compact"),s=function(e,t){var s=t.results[0];this.query=s.query,this.hits=s.hits,this.index=s.index,this.hitsPerPage=s.hitsPerPage,this.nbHits=s.nbHits,this.nbPages=s.nbPages,this.page=s.page,this.processingTimeMS=s.processingTimeMS,this.disjunctiveFacets=[],this.facets=[],this.facets_stats=[];var o=e.getRefinedDisjunctiveFacets(),a=n(e.facets),c=n(e.disjunctiveFacets);r(s.facets,function(t,n){if(-1!==e.disjunctiveFacets.indexOf(n)){var r=c[n];this.disjunctiveFacets[r]={name:n,data:t}}else{var r=a[n];this.facets[r]={name:n,data:t}}},this),r(o,function(n,i){var o=t.results[i+1];r(o.facets,function(n,o){var a=c[o];e.getRankingInfo&&(this.facets_stats[o]=s.facets_stats[o]||{},this.facets_stats[o].timeout=!!t.results[i+1].timeoutCounts),this.disjunctiveFacets[a]={name:o,data:n},e.disjunctiveFacetsRefinements[o]&&r(e.disjunctiveFacetsRefinements[o],function(t){!this.disjunctiveFacets[a].data[t]&&e.disjunctiveFacetsRefinements[o].indexOf(t)>-1&&(this.disjunctiveFacets[a].data[t]=0)},this)},this);for(var a in o.facets_stats)this.facets_stats[a]=o.facets_stats[a]},this),r(e.facetsExcludes,function(e,t){var n=a[t];this.facets[n]={name:t,data:s.facets[t]},r(e,function(e){this.facets[n]?this.facets[n].data[e]||(this.facets[n].data[e]=0):(this.facets[n]={name:t,data:{}},this.facets[n].data[e]=0)},this)},this),this.facets=i(this.facets),this.disjunctiveFacets=i(this.disjunctiveFacets)};t.exports=s},{"lodash/array/compact":7,"lodash/collection/forEach":8}],71:[function(e,t){"use strict";function n(e,t,n){this.client=e,this.index=t,this.state=new r(n)}var r=e("./SearchParameters"),i=e("./SearchResults"),s=e("./functions/extend"),o=e("util"),a=e("events"),c=e("lodash/collection/forEach"),u=e("lodash/function/bind");o.inherits(n,a.EventEmitter),n.prototype.search=function(){return this._search(),this},n.prototype.setQuery=function(e){return this.state=this.state.setQuery(e).setPage(0),this.emit("change",this.state),this},n.prototype.clearRefinements=function(){return this.state=this.state.clearRefinements(),this.emit("change",this.state),this},n.prototype.addDisjunctiveRefine=function(e,t){return this.state=this.state.addDisjunctiveFacetRefinement(e,t),this.emit("change",this.state),this},n.prototype.removeDisjunctiveRefine=function(e,t){return this.state=this.state.removeDisjunctiveFacetRefinement(e,t),this.emit("change",this.state),this},n.prototype.addNumericRefinement=function(e,t,n){return this.state=this.state.addNumericRefinement(e,t,n),this.emit("change",this.state),this},n.prototype.removeNumericRefinement=function(e,t,n){return this.state=this.state.removeNumericRefinement(e,t,n),this.emit("change",this.state),this},n.prototype.addRefine=function(e,t){return this.state=this.state.addFacetRefinement(e,t),this.emit("change",this.state),this},n.prototype.removeRefine=function(e,t){return this.state=this.state.removeFacetRefinement(e,t),this.emit("change",this.state),this},n.prototype.addExclude=function(e,t){return this.state=this.state.addExcludeRefinement(e,t),this.emit("change",this.state),this},n.prototype.removeExclude=function(e,t){return this.state=this.state.removeExcludeRefinement(e,t),this.emit("change",this.state),this},n.prototype.toggleExclude=function(e,t){return this.state=this.state.toggleExcludeFacetRefinement(e,t),this.emit("change",this.state),this},n.prototype.toggleRefine=function(e,t){if(this.state.facets.indexOf(e)>-1)this.state=this.state.toggleFacetRefinement(e,t);else{if(!(this.state.disjunctiveFacets.indexOf(e)>-1))return console.log("warning : you're trying to refine the undeclared facet '"+e+"'; add it to the helper options 'facets' or 'disjunctiveFacets'"),this;this.state=this.state.toggleDisjunctiveFacetRefinement(e,t)}return this.emit("change",this.state),this},n.prototype.nextPage=function(){return this.setPage(this.state.page+1)},n.prototype.previousPage=function(){return this.setPage(this.state.page-1)},n.prototype.setPage=function(e){if(0>e)throw new Error("Page requested below 0.");return this.state=this.state.setPage(e),this.emit("change",this.state),this},n.prototype.setIndex=function(e){return this.index=e,this},n.prototype.setState=function(e){return this.state=new r(e),this.emit("change",this.state),this},n.prototype.isRefined=function(e,t){return this.state.isFacetRefined(e,t)},n.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},n.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},n.prototype.getIndex=function(){return this.index},n.prototype.getCurrentPage=function(){return this.state.page},n.prototype._search=function(){var e=this.state;this.client.startQueriesBatch(),this.client.addQueryInBatch(this.index,e.query,this._getHitsSearchParams()),c(e.getRefinedDisjunctiveFacets(),function(t){this.client.addQueryInBatch(this.index,e.query,this._getDisjunctiveFacetSearchParams(t))},this),this.client.sendQueriesBatch(u(this._handleResponse,this,e))},n.prototype._handleResponse=function(e,t,n){if(t)return void this.emit("error",t);var r=(e.getRefinedDisjunctiveFacets(),new i(e,n));this.emit("result",r)},n.prototype._getHitsSearchParams=function(){var e=this.state.facets.concat(this.state.getUnrefinedDisjunctiveFacets()),t=this._getFacetFilters(),n=this._getNumericFilters(),r={facets:e,distinct:!1};return t.length>0&&(r.facetFilters=t,r.distinct=this.state.distinct||!1),n.length>0&&(r.numericFilters=n),s(this.state.getQueryParams(),r)},n.prototype._getDisjunctiveFacetSearchParams=function(e){var t=this._getFacetFilters(e),n=this._getNumericFilters(),r={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],facets:e,distinct:!1};return n.length>0&&(r.numericFilters=n),t.length>0&&(r.facetFilters=t,r.distinct=this.state.distinct||!1),s(this.state.getQueryParams(),r)},n.prototype._getNumericFilters=function(){var e=[];return c(this.state.numericRefinements,function(t,n){c(t,function(t,r){e.push(n+r+t)})}),e},n.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0},n.prototype._getFacetFilters=function(e){var t=[];return c(this.state.facetsRefinements,function(e,n){t.push(n+":"+e)}),c(this.state.facetsExcludes,function(e,n){c(e,function(e){t.push(n+":-"+e)})}),c(this.state.disjunctiveFacetsRefinements,function(n,r){if(r!==e&&n&&0!==n.length){var i=[];c(n,function(e){i.push(r+":"+e)}),t.push(i)}}),t},t.exports=n},{"./SearchParameters":69,"./SearchResults":70,"./functions/extend":72,events:2,"lodash/collection/forEach":8,"lodash/function/bind":11,util:6}],72:[function(e,t){"use strict";t.exports=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}},{}]},{},[1])(1)});